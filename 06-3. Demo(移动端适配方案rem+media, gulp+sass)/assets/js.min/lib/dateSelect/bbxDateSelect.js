function bbxDatePicker(u){var n=new Date;function a(e){var t=SpinningWheel.getSelectedValues();if(console.log("当前选中的日期是："+JSON.stringify(t)),0==t.keys[0])$(".sw-hour, .sw-minute").hide();else if($(".sw-hour, .sw-minute").css({display:"table-cell"}),1==t.keys[0]&&-1!=t.values[0].text.indexOf("今天")){var n=e.getHours(),a=e.getMinutes();if(parseInt(t.values[1].value)<=n)if(SpinningWheel.scrollToValue(1,n),50<a+30){SpinningWheel.scrollToValue(1,n+1);var l=10*Math.ceil((a-30)/10);t.values[2].value<l&&SpinningWheel.scrollToValue(2,l)}else{l=10*Math.ceil(a/10)+30;t.values[2].value<l&&SpinningWheel.scrollToValue(2,l)}else if(parseInt(t.values[1].value)==n+1){l=10*Math.ceil((a-30)/10);t.values[2].value<l&&SpinningWheel.scrollToValue(2,l)}}}function l(){var e=SpinningWheel.getSelectedValues(),t=e.values[0],n=e.values[1],a=e.values[2],l=t.text,s="",i="";-1!=l.indexOf("现在出发")?(s=t.value,i="现在出发 "+s.split(" ")[1]):-1!=l.indexOf("今天")?(s=t.value+" "+n.text+":"+a.text,i="今天 "+n.text+":"+a.text):-1!=l.indexOf("明天")?(s=t.value+" "+n.text+":"+a.text,i="明天 "+n.text+":"+a.text):-1!=l.indexOf("后天")?(s=t.value+" "+n.text+":"+a.text,i="后天 "+n.text+":"+a.text):(s=t.value+" "+n.text+":"+a.text,i=t.text.split(" ")[0]+n.text+":"+a.text),setTimeout(function(){$("li.time input").val(i).attr("data-value",s),u&&u()},500)}function s(){}function g(e){return parseInt(e)<10&&(e="0"+e),e}function c(e){var t="";switch(parseInt(e)){case 0:t="周日";break;case 1:t="周一";break;case 2:t="周二";break;case 3:t="周三";break;case 4:t="周四";break;case 5:t="周五";break;case 6:t="周六"}return t}function o(e,t){if("string"!=typeof e&&"object"==typeof e){var n=e.getFullYear(),a=e.getMonth()+1,l=e.getDate(),s=e.getHours(),i=e.getMinutes(),u=e.getSeconds(),r=e.getDay(),g=e.getMilliseconds(),c="";1==r?c="星期一":2==r?c="星期二":3==r?c="星期三":4==r?c="星期四":5==r?c="星期五":6==r?c="星期六":7==r&&(c="星期日");var o="0"+a,v="0"+l,p="0"+s,d="0"+i,h="0"+u;return t.replace(/yyyy/g,n).replace(/YYYY/g,n).replace(/yy/g,(n+"").substring(2,4)).replace(/YY/g,(n+"").substring(2,4)).replace(/MM/g,o.substring(o.length-2)).replace(/dd/g,v.substring(v.length-2)).replace(/HH/g,p.substring(p.length-2)).replace(/hh/g,p.substring(p.length-2)).replace(/mm/g,d.substring(d.length-2)).replace(/sss/g,g).replace(/SSS/g,g).replace(/ss/g,h.substring(h.length-2)).replace(/SS/g,h.substring(h.length-2)).replace(/E/g,c)}}$("li.time input").val("现在出发 "+g(n.getHours())+":"+g(n.getMinutes())).attr("data-value",o(n,"yyyy-MM-dd HH:mm:ss")),$("li.time input").off("click").on("click",function(){var t,e;e=function(e){for(var t={minutes:{0:{value:0,text:"00"},10:{value:10,text:"10"},20:{value:20,text:"20"},30:{value:30,text:"30"},40:{value:40,text:"40"},50:{value:50,text:"50"}},hours:{},dates:{}},n=0;n<24;n++)t.hours[n]={value:n,text:g(n)};var a=[];if(a[0]={value:o(e,"yyyy/MM/dd HH:mm"),text:"现在出发"},!(23==e.getHours()&&50<=e.getMinutes())){var l={value:o(e,"yyyy/MM/dd"),text:o(e,"MM月dd日")+" 今天"};a.push(l)}for(var n=1;n<15;n++){var s=e.getTime(),i=new Date(s),u=new Date(i.setDate(i.getDate()+n)),r="";switch(n){case 1:r="明天";break;case 2:r="后天";break;default:r=c(u.getDay())}var l={value:o(u,"yyyy/MM/dd"),text:o(u,"MM月dd日")+" "+r};a.push(l)}for(var n=0;n<a.length;n++)t.dates[n]=a[n];return console.log("生成日期列表数据："+JSON.stringify(t)),t}(t=n),SpinningWheel.addSlot(e.dates,"date"),SpinningWheel.addSlot(e.hours,"hour"),SpinningWheel.addSlot(e.minutes,"minute"),SpinningWheel.open(),SpinningWheel.setCancelAction(s),SpinningWheel.setDoneAction(l),a(t),$("#sw-wrapper").on("touchend",function(e){setTimeout(function(){a(t),e.preventDefault()},100)})})}