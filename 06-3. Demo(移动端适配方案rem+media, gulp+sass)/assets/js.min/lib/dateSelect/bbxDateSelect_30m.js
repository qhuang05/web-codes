var bbxDatePicker={run:function(){var e=new Date;$("li.time input").val("现在出发 "+this.doubleNumber(e.getHours())+":"+this.doubleNumber(e.getMinutes())).attr("data-value",this.formatDate(e,"yyyy-MM-dd HH:mm:ss"));var t=this;$("li.time input").off("click").on("click",function(){t._bbxDatePicker(e)})},_bbxDatePicker:function(t){var e=this.generateDateList(t);this.showTimePicker(e),this.showSlotsBySelectedValue(t);var a=this;$("#sw-wrapper").on("touchend",function(e){setTimeout(function(){a.showSlotsBySelectedValue(t),e.preventDefault()},100)})},generateDateList:function(e){for(var t={minutes:{0:{value:0,text:"00"},10:{value:10,text:"10"},20:{value:20,text:"20"},30:{value:30,text:"30"},40:{value:40,text:"40"},50:{value:50,text:"50"}},hours:{},dates:{}},a=0;a<24;a++)t.hours[a]={value:a,text:this.doubleNumber(a)};var n=[];n[0]={value:this.formatDate(e,"yyyy/MM/dd HH:mm"),text:"现在出发"};if(!(23==e.getHours()&&50<=e.getMinutes())){var l={value:this.formatDate(e,"yyyy/MM/dd"),text:this.formatDate(e,"MM月dd日")+" 今天"};n.push(l)}for(a=1;a<15;a++){var i=e.getTime(),s=new Date(i),r=new Date(s.setDate(s.getDate()+a)),u="";switch(a){case 1:u="明天";break;case 2:u="后天";break;default:u=this.toWeekString(r.getDay())}l={value:this.formatDate(r,"yyyy/MM/dd"),text:this.formatDate(r,"MM月dd日")+" "+u};n.push(l)}for(a=0;a<n.length;a++)t.dates[a]=n[a];return console.log("生成日期列表数据："+JSON.stringify(t)),t},showTimePicker:function(e){SpinningWheel.addSlot(e.dates,"date"),SpinningWheel.addSlot(e.hours,"hour"),SpinningWheel.addSlot(e.minutes,"minute"),SpinningWheel.open(),SpinningWheel.setCancelAction(this.cancel),SpinningWheel.setDoneAction(this.done)},showSlotsBySelectedValue:function(e){var t=SpinningWheel.getSelectedValues();if(console.log("当前选中的日期是："+JSON.stringify(t)),0==t.keys[0])$(".sw-hour, .sw-minute").hide();else if($(".sw-hour, .sw-minute").css({display:"table-cell"}),1==t.keys[0]&&-1!=t.values[0].text.indexOf("今天")){var a=e.getHours(),n=e.getMinutes();if(parseInt(t.values[1].value)<=a)if(SpinningWheel.scrollToValue(1,a),50<n+30){SpinningWheel.scrollToValue(1,a+1);var l=10*Math.ceil((n-30)/10);t.values[2].value<l&&SpinningWheel.scrollToValue(2,l)}else{l=10*Math.ceil(n/10)+30;t.values[2].value<l&&SpinningWheel.scrollToValue(2,l)}else if(parseInt(t.values[1].value)==a+1){l=10*Math.ceil((n-30)/10);t.values[2].value<l&&SpinningWheel.scrollToValue(2,l)}}},done:function(){var e=SpinningWheel.getSelectedValues(),t=e.values[0],a=e.values[1],n=e.values[2],l=t.text,i="",s="";-1!=l.indexOf("现在出发")?(i=t.value,s="现在出发 "+i.split(" ")[1]):-1!=l.indexOf("今天")?(i=t.value+" "+a.text+":"+n.text,s="今天 "+a.text+":"+n.text):-1!=l.indexOf("明天")?(i=t.value+" "+a.text+":"+n.text,s="明天 "+a.text+":"+n.text):-1!=l.indexOf("后天")?(i=t.value+" "+a.text+":"+n.text,s="后天 "+a.text+":"+n.text):(i=t.value+" "+a.text+":"+n.text,s=t.text.split(" ")[0]+a.text+":"+n.text),setTimeout(function(){$("li.time input").val(s).attr("data-value",i)},500)},cancel:function(){},doubleNumber:function(e){return parseInt(e)<10&&(e="0"+e),e},toWeekString:function(e){var t="";switch(parseInt(e)){case 0:t="周日";break;case 1:t="周一";break;case 2:t="周二";break;case 3:t="周三";break;case 4:t="周四";break;case 5:t="周五";break;case 6:t="周六"}return t},formatDate:function(e,t){if("string"!=typeof e&&"object"==typeof e){var a=e.getFullYear(),n=e.getMonth()+1,l=e.getDate(),i=e.getHours(),s=e.getMinutes(),r=e.getSeconds(),u=e.getDay(),o=e.getMilliseconds(),c="";1==u?c="星期一":2==u?c="星期二":3==u?c="星期三":4==u?c="星期四":5==u?c="星期五":6==u?c="星期六":7==u&&(c="星期日");var g="0"+n,h="0"+l,v="0"+i,d="0"+s,p="0"+r;return t.replace(/yyyy/g,a).replace(/YYYY/g,a).replace(/yy/g,(a+"").substring(2,4)).replace(/YY/g,(a+"").substring(2,4)).replace(/MM/g,g.substring(g.length-2)).replace(/dd/g,h.substring(h.length-2)).replace(/HH/g,v.substring(v.length-2)).replace(/hh/g,v.substring(v.length-2)).replace(/mm/g,d.substring(d.length-2)).replace(/sss/g,o).replace(/SSS/g,o).replace(/ss/g,p.substring(p.length-2)).replace(/SS/g,p.substring(p.length-2)).replace(/E/g,c)}}};