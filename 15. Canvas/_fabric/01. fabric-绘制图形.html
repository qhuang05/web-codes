<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>fabric-绘制图形</title>
    <script src="../js/jquery-1.11.3.min.js"></script>
    <script src="../js/fabric.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0
        }
    </style>
</head>

<body>
    <canvas id="main" width="800" height="800" style="border:1px solid #666"></canvas>
    <img src="../images/sm001.jpg" id="img" />
    <script>
        $(function () {
            // 声明画布
            let canvas = new fabric.Canvas('main');

            // 绘制矩形
            let rect = new fabric.Rect({
                left: 5,
                top: 5,
                width: 30,
                height: 30,
                fill: 'red',
                stroke: '#880E4F',
                strokeWidth: 1,
                rx: 0,      //边框弧度
                ry: 0,
                angle: 0,   //倾斜角度
                scaleX: 2,  //拉伸倍数
                scaleY: 2,
                hasControls: true, //是否有控制条
            });
            canvas.add(rect);

            // 绘制圆形
            var circle = new fabric.Circle({
                left: 50,
                top: 50,
                radius: 50, //半径
                fill: '#039BE5',
                stroke: 'red',
                strokeWidth: 3,
                opacity: 0.7,
                strokeUniform: false,   //???
            });
            canvas.add(circle);

            // 绘制三角形
            var triangle = new fabric.Triangle({
                left: 100,
                top: 20,
                width: 100,
                height: 100,
                fill: 'blue',
                strokeWidth: 2,
                stroke: "#880E4F",
                opacity: 0.7,
            })
            canvas.add(triangle);

            // 绘制文本
            var xText = new fabric.IText('Hello World', {
                left: 200,
                top: 50,
                fill: '#D81B60',
                strokeWidth: 2,
                stroke: "#880E4F",
            });

            var yText = new fabric.Textbox('Hello Fabric', {
                left: 20,
                top: 50,
                fill: '#880E4F',
                strokeWidth: 2,
                stroke: "#D81B60"
            });
            canvas.add(xText, yText);

            //绘制不规则图形
            var path = new fabric.Path('M 200 200 L 400 500 L 150 600 z');
            path.set({
                left: 300,
                top: 100,
                fill: 'red'
            });
            canvas.add(path);

            //绘制图像
            var imgObj = document.getElementById('img');
            var img1 = new fabric.Image(imgObj, {
                top: 300,
                left: 300,
                width: 200,
                height: 200,
                angle: 30
            })
            canvas.add(img1);
            var img2 = fabric.Image.fromURL('./images/001.jpg', function (img) {
                img.scale(0.5);
                img.left = 400;
                img.top = 400;
                canvas.add(img);
            });

            //组合
            var group = new fabric.Group([rect, xText], {
                left: 50,
                top: 500
            })
            canvas.add(group);

            // 序列化、反序列化、canvas转svg：
            // console.log(JSON.stringify(canvas.toJSON()));
            // canvas.loadFromJSON(data);
            // console.log(canvas.toSVG());
        })
    </script>
</body>

</html>